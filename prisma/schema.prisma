generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("SUPABASE_CONNECTION_STRING")
}

model UserPostContent {
  postId             Int       @map("post_id")
  postRevisionNumber Int       @map("post_revision_number")
  postAuthorHash     Decimal  @map("post_author_hash")
  postDateJst        DateTime @map("post_date_jst")
  postDateGmt        DateTime @map("post_date_gmt")
  postContent        String   @map("post_content")
  postTitle          String   @map("post_title")
  postStatus         String   @map("post_status")
  commentStatus      String   @map("comment_status")
  postUrl            String   @map("post_url")
  countLikes        Int       @map("count_likes")
  countDislikes     Int       @map("count_dislikes")

  @@id([postId, postRevisionNumber])
  @@map("user_post_contents")
}

model DimTags {
  tagId   Int    @map("tag_id")
  postId Int @map("post_id")
  tagName String @map("tag_name")
  @@id([tagId, postId])
  @@map("dim_tags")
}

model DimComments {
  commentId Int @id @unique @default(autoincrement()) @map("comment_id")
  postId    Int @map("post_id")
  commentAuthor String @map("comment_author")
  commentAuthorIpHash String @map("comment_author_ip_hash")
  commentDateJst DateTime @map("comment_date_jst")
  commentDateGmt DateTime @map("comment_date_gmt")
  commentContent String @map("comment_content")
  commentParent Int @map("comment_parent")

  @@map("dim_comments")
}

model FctPostVoteHisotry {
  voteDateGmt DateTime @map("vote_date_gmt")
  voteUserIpHash String @map("vote_user_ip_hash")
  postId Int @map("post_id")
  voteTypeInt Int @map("vote_type_int")
  
  @@id([voteDateGmt, voteUserIpHash, postId])
  @@map("fct_post_vote_history")
}
